INFO - tinypaper - Running command 'main'
INFO - tinypaper - Started run with ID "1"
INFO - main - playing only games [5, 41, 47, 57]
  0%|          | 0/4 [00:00<?, ?it/s]/home/fdamken/tinypaper_code/src/model/model.py:19: UserWarning: Running model NOT in dry mode! This will consume API tokens and may cost money. MAKE SURE TO RUN IN DRY MODE FIRST TO GET AN ESTIMATE!
  warnings.warn(f"Running model NOT in dry mode! This will consume API tokens and may cost money. MAKE SURE TO RUN IN DRY MODE FIRST TO GET AN ESTIMATE!")
 25%|██▌       | 1/4 [00:17<00:53, 17.80s/it] 50%|█████     | 2/4 [00:27<00:26, 13.12s/it] 75%|███████▌  | 3/4 [00:41<00:13, 13.30s/it]100%|██████████| 4/4 [00:45<00:00,  9.91s/it]100%|██████████| 4/4 [00:45<00:00, 11.47s/it]
INFO - tinypaper - Result: {'answers': ['skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', ['2', '2', '2', '2', '2', '1', '2', '1', '2', '2', '2', '2', '2'], 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'Traceback (most recent call last):\n  File "/home/fdamken/tinypaper_code/scripts/experiments/run.py", line 17, in _run_game\n    result = agent.play(game)\n             ^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 289, in wrapped_f\n    return self(f, *args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 379, in __call__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 314, in iter\n    return fut.result()\n           ^^^^^^^^^^^^\n  File "/home/fdamken/.pyenv/versions/3.11.7/lib/python3.11/concurrent/futures/_base.py", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.pyenv/versions/3.11.7/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result\n    raise self._exception\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 382, in __call__\n    result = fn(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 26, in play\n    return [self._prompt(self._make_prompt(scenario)) for scenario in game.scenarios]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 26, in <listcomp>\n    return [self._prompt(self._make_prompt(scenario)) for scenario in game.scenarios]\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 32, in _prompt\n    result = self._model.prompt(prompt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/model/google.py", line 32, in prompt\n    return self._fetch(prompt)\n           ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/sacred/config/captured_function.py", line 42, in captured_function\n    result = wrapped(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/model/google.py", line 69, in _fetch\n    return self._chat.send_message(prompt).text\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 434, in send_message\n    self._check_response(response=response, stream=stream)\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 453, in _check_response\n    raise generation_types.BlockedPromptException(response.prompt_feedback)\ngoogle.generativeai.types.generation_types.BlockedPromptException: block_reason: OTHER\n\n', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'Traceback (most recent call last):\n  File "/home/fdamken/tinypaper_code/scripts/experiments/run.py", line 17, in _run_game\n    result = agent.play(game)\n             ^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 289, in wrapped_f\n    return self(f, *args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 379, in __call__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 314, in iter\n    return fut.result()\n           ^^^^^^^^^^^^\n  File "/home/fdamken/.pyenv/versions/3.11.7/lib/python3.11/concurrent/futures/_base.py", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.pyenv/versions/3.11.7/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result\n    raise self._exception\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 382, in __call__\n    result = fn(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 26, in play\n    return [self._prompt(self._make_prompt(scenario)) for scenario in game.scenarios]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 26, in <listcomp>\n    return [self._prompt(self._make_prompt(scenario)) for scenario in game.scenarios]\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 32, in _prompt\n    result = self._model.prompt(prompt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/model/google.py", line 32, in prompt\n    return self._fetch(prompt)\n           ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/sacred/config/captured_function.py", line 42, in captured_function\n    result = wrapped(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/model/google.py", line 69, in _fetch\n    return self._chat.send_message(prompt).text\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 434, in send_message\n    self._check_response(response=response, stream=stream)\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 453, in _check_response\n    raise generation_types.BlockedPromptException(response.prompt_feedback)\ngoogle.generativeai.types.generation_types.BlockedPromptException: block_reason: OTHER\n\n', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'Traceback (most recent call last):\n  File "/home/fdamken/tinypaper_code/scripts/experiments/run.py", line 17, in _run_game\n    result = agent.play(game)\n             ^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 289, in wrapped_f\n    return self(f, *args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 379, in __call__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 314, in iter\n    return fut.result()\n           ^^^^^^^^^^^^\n  File "/home/fdamken/.pyenv/versions/3.11.7/lib/python3.11/concurrent/futures/_base.py", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.pyenv/versions/3.11.7/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result\n    raise self._exception\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/tenacity/__init__.py", line 382, in __call__\n    result = fn(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 26, in play\n    return [self._prompt(self._make_prompt(scenario)) for scenario in game.scenarios]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 26, in <listcomp>\n    return [self._prompt(self._make_prompt(scenario)) for scenario in game.scenarios]\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/agent.py", line 32, in _prompt\n    result = self._model.prompt(prompt)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/model/google.py", line 32, in prompt\n    return self._fetch(prompt)\n           ^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/sacred/config/captured_function.py", line 42, in captured_function\n    result = wrapped(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/tinypaper_code/src/model/google.py", line 69, in _fetch\n    return self._chat.send_message(prompt).text\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 434, in send_message\n    self._check_response(response=response, stream=stream)\n  File "/home/fdamken/.cache/pypoetry/virtualenvs/non-package-mode-0juKmIlL-py3.11/lib/python3.11/site-packages/google/generativeai/generative_models.py", line 453, in _check_response\n    raise generation_types.BlockedPromptException(response.prompt_feedback)\ngoogle.generativeai.types.generation_types.BlockedPromptException: block_reason: OTHER\n\n', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]', 'skipped; only playing games [5, 41, 47, 57]'], 'api_usage': [APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=-1, num_output_tokens=-1, cost=0.0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUsage(name='gemini-1.0-pro-001', num_input_tokens=0, num_output_tokens=0, cost=0), APIUs